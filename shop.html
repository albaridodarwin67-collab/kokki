<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronRide | Shop</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<nav>
    <div class="logo">IRONRIDE</div>
    
    <div class="search-container">
        <input type="text" id="shopSearch" placeholder="Search parts...">
    </div>

    <div class="menu">
        <a href="index.html">Home</a>
        <a href="shop.html" class="active">Shop</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
    </div>
</nav>

<main class="container">
    <h2 class="section-title">High-Performance Inventory</h2>

    <h3 id="noResults" style="display: none; text-align: center; color: #ff4d4d; margin-top: 50px;">
        ðŸš« No parts found in the garage. Try another search!
    </h3>
    
    <div class="product-grid">
        <div class="card">
            <div class="badge">Trending</div>
            <img src="exhust.webp" alt="Exhaust">
            <h3>Titanium Slip-On Exhaust</h3>
            <p class="price">â‚±18,500</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <img src="carb.png" alt="Helmet">
            <h3>Carbon Aero Helmet</h3>
            <p class="price">â‚±12,200</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <img src="nit.jpg" alt="Shocks">
            <h3>Nitrogen Rear Shocks</h3>
            <p class="price">â‚±8,400</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <div class="badge">Sale</div>
            <img src="led.jpg" alt="Light">
            <h3>Projector LED Headlight</h3>
            <p class="price">â‚±2,100</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <div class="badge">Trending</div>
            <img src="mags.png" alt="Mags">
            <h3>Mags raizen</h3>
            <p class="price">â‚±10,500</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <div class="badge">Trending</div>
            <img src="dyno.jpeg" alt="swing arm">
            <h3>Dynopro +3</h3>
            <p class="price">â‚±10,000</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <div class="badge">Trending</div>
            <img src="caliper.jpeg" alt="caliper">
            <h3>Brembo 4pot</h3>
            <p class="price">â‚±70,000</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <div class="badge">Trending</div>
            <img src="mags2.jpeg" alt="mags">
            <h3>Mags</h3>
            <p class="price">â‚±15,000</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <div class="badge">Trending</div>
            <img src="tire.jpeg" alt="tire">
            <h3>Tires</h3>
            <p class="price">â‚±70,000</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>

        <div class="card">
            <div class="badge">Trending</div>
            <img src="meter1.jpeg" alt="speedo">
            <h3>Speedometer</h3>
            <p class="price">â‚±70,000</p>
            <button class="add-to-cart">Add to Cart</button>
        </div>
    </div>
</main>

<div id="cartSidebar" style="position: fixed; right: -400px; top: 0; width: 350px; height: 100%; background: #1a1a1a; border-left: 2px solid #ff4d4d; z-index: 2000; transition: 0.4s; padding: 25px; box-shadow: -10px 0 30px rgba(0,0,0,0.5);">
    <h2 style="color: #ff4d4d; border-bottom: 2px solid #333; padding-bottom: 10px;">Your Garage</h2>
    
    <div id="cartItemsList" style="margin-top: 20px; height: 65vh; overflow-y: auto;">
        <p id="emptyMsg" style="color: #555; text-align: center; margin-top: 50px;">Your garage is empty.</p>
    </div>

    <div style="position: absolute; bottom: 0; left: 0; width: 100%; padding: 25px; background: #111; box-sizing: border-box;">
        <h3 style="display: flex; justify-content: space-between; color: white;">Total: <span id="cartTotal">â‚±0</span></h3>
        <button id="checkoutBtn" class="glow-button" style="width: 100%; margin-top: 10px; cursor: pointer; border: none;">Proceed to Checkout</button>
        <button onclick="toggleCart()" style="width: 100%; margin-top: 10px; background: transparent; color: #888; border: none; cursor: pointer;">Close Garage</button>
    </div>
</div>

<button onclick="toggleCart()" style="position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: #ff4d4d; border: none; color: white; font-size: 24px; cursor: pointer; z-index: 1500; box-shadow: 0 0 20px rgba(255,77,77,0.4);">ðŸ›’</button>

<footer>
    <p>Â© 2026 IronRide Motorcycle Parts</p>
</footer>

<script>
    const searchInput = document.getElementById('shopSearch');
    const cards = document.querySelectorAll('.card');
    const cartSidebar = document.getElementById('cartSidebar');
    const cartItemsList = document.getElementById('cartItemsList');
    const cartTotalDisplay = document.getElementById('cartTotal');
    
    let garage = [];
    let total = 0;

    // --- SEARCH LOGIC ---
    function runSearch(word) {
        let foundCount = 0;
        cards.forEach(card => {
            const productName = card.querySelector('h3').textContent.toLowerCase();
            if (productName.includes(word.toLowerCase())) {
                card.style.display = "block";
                foundCount++;
            } else {
                card.style.display = "none";
            }
        });
        document.getElementById('noResults').style.display = (foundCount === 0) ? "block" : "none";
    }

    searchInput.addEventListener('input', (e) => runSearch(e.target.value));

    // --- CART / GARAGE LISTING LOGIC ---
    function toggleCart() {
        const currentRight = cartSidebar.style.right;
        cartSidebar.style.right = (currentRight === "0px") ? "-400px" : "0px";
    }

    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', (e) => {
            const card = e.target.closest('.card');
            const name = card.querySelector('h3').textContent;
            const price = parseInt(card.querySelector('.price').textContent.replace(/[â‚±,]/g, ''));

            // Step 1: Add to our list
            garage.push({ name, price });
            
            // Step 2: Refresh the visual list
            updateGarageUI();
            
            // Step 3: Open the garage sidebar so they see it
            if(cartSidebar.style.right !== "0px") toggleCart();
        });
    });

    function updateGarageUI() {
        cartItemsList.innerHTML = '';
        total = 0;

        if (garage.length === 0) {
            cartItemsList.innerHTML = '<p style="color: #555; text-align: center; margin-top: 50px;">Your garage is empty.</p>';
        } else {
            garage.forEach((item) => {
                total += item.price;
                const div = document.createElement('div');
                div.style.cssText = "display: flex; justify-content: space-between; background: #222; padding: 12px; margin-bottom: 10px; border-radius: 5px; color: white; border-left: 3px solid #ff4d4d;";
                div.innerHTML = `<span>${item.name}</span><span>â‚±${item.price.toLocaleString()}</span>`;
                cartItemsList.appendChild(div);
            });
        }
        cartTotalDisplay.textContent = `â‚±${total.toLocaleString()}`;
    }

    // --- FINAL CHECKOUT LOGIC ---
    document.getElementById('checkoutBtn').addEventListener('click', () => {
        if (garage.length === 0) {
            alert("Your garage is empty!");
            return;
        }

        // Final summary
        alert(`âœ… Checkout Successful!\n\nYour items already checked out.\nTotal Payment: â‚±${total.toLocaleString()}`);
        
        garage = [];
        updateGarageUI();
        toggleCart();
    });

    // Handle Search from Home page
    window.addEventListener('load', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const item = urlParams.get('item');
        if (item) {
            searchInput.value = item;
            runSearch(item);
        }
    });
</script>

</body>
</html>
